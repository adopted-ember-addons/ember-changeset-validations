{"version":3,"file":"validation-errors.js","sources":["../../src/utils/validation-errors.js"],"sourcesContent":["/**\n * For code taken from ember-cp-validations\n * Copyright 2016, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nimport { get } from '@ember/object';\n\nimport { assert } from '@ember/debug';\nimport { getOwnConfig } from '@embroider/macros';\nimport { getMessages } from './messages.js';\n\nexport default function buildMessage(key, result) {\n  let returnsRaw = getOwnConfig()?.rawOutput || false;\n  let messages = getMessages();\n\n  let description = messages.getDescriptionFor(key);\n\n  if (result.message) {\n    return result.message;\n  }\n\n  let { type, value, context = {} } = result;\n\n  let message = get(messages, type);\n  if (returnsRaw) {\n    context = Object.assign({}, context, { description });\n    return { value, type, message, context };\n  }\n\n  if (context.message) {\n    let message = context.message;\n\n    if (typeof message === 'function') {\n      let builtMessage = message(key, type, value, context);\n      assert(\n        'Custom message function must return a string',\n        typeof builtMessage === 'string',\n      );\n\n      return builtMessage;\n    }\n\n    return messages.formatMessage(\n      message,\n      Object.assign({ description }, context),\n    );\n  }\n\n  return messages.formatMessage(\n    message,\n    Object.assign({ description }, context),\n  );\n}\n"],"names":["buildMessage","key","result","returnsRaw","getOwnConfig","rawOutput","messages","getMessages","description","getDescriptionFor","message","type","value","context","get","Object","assign","builtMessage","assert","formatMessage"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AAOe,SAASA,YAAYA,CAACC,GAAG,EAAEC,MAAM,EAAE;EAChD,IAAIC,UAAU,GAAGC,YAAY,EAAE,EAAEC,SAAS,IAAI,KAAK;AACnD,EAAA,IAAIC,QAAQ,GAAGC,WAAW,EAAE;AAE5B,EAAA,IAAIC,WAAW,GAAGF,QAAQ,CAACG,iBAAiB,CAACR,GAAG,CAAC;EAEjD,IAAIC,MAAM,CAACQ,OAAO,EAAE;IAClB,OAAOR,MAAM,CAACQ,OAAO;AACvB;EAEA,IAAI;IAAEC,IAAI;IAAEC,KAAK;AAAEC,IAAAA,OAAO,GAAG;AAAG,GAAC,GAAGX,MAAM;AAE1C,EAAA,IAAIQ,OAAO,GAAGI,GAAG,CAACR,QAAQ,EAAEK,IAAI,CAAC;AACjC,EAAA,IAAIR,UAAU,EAAE;IACdU,OAAO,GAAGE,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEH,OAAO,EAAE;AAAEL,MAAAA;AAAY,KAAC,CAAC;IACrD,OAAO;MAAEI,KAAK;MAAED,IAAI;MAAED,OAAO;AAAEG,MAAAA;KAAS;AAC1C;EAEA,IAAIA,OAAO,CAACH,OAAO,EAAE;AACnB,IAAA,IAAIA,OAAO,GAAGG,OAAO,CAACH,OAAO;AAE7B,IAAA,IAAI,OAAOA,OAAO,KAAK,UAAU,EAAE;MACjC,IAAIO,YAAY,GAAGP,OAAO,CAACT,GAAG,EAAEU,IAAI,EAAEC,KAAK,EAAEC,OAAO,CAAC;AACrDK,MAAAA,MAAM,CACJ,8CAA8C,EAC9C,OAAOD,YAAY,KAAK,QAC1B,CAAC;AAED,MAAA,OAAOA,YAAY;AACrB;IAEA,OAAOX,QAAQ,CAACa,aAAa,CAC3BT,OAAO,EACPK,MAAM,CAACC,MAAM,CAAC;AAAER,MAAAA;KAAa,EAAEK,OAAO,CACxC,CAAC;AACH;EAEA,OAAOP,QAAQ,CAACa,aAAa,CAC3BT,OAAO,EACPK,MAAM,CAACC,MAAM,CAAC;AAAER,IAAAA;GAAa,EAAEK,OAAO,CACxC,CAAC;AACH;;;;"}