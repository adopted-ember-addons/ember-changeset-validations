{"version":3,"file":"presence.js","sources":["../../src/validators/presence.js"],"sourcesContent":["import buildMessage from '../utils/validation-errors.js';\nimport evValidatePresence from 'ember-validators/presence';\nimport { get } from '@ember/object';\n\nexport default function validatePresence(options) {\n  let targets;\n  if (typeof options === 'boolean') {\n    options = { presence: options };\n  } else if (options && options.on !== undefined) {\n    if (typeof options.on === 'string') {\n      targets = [options.on];\n    } else if (Array.isArray(options.on)) {\n      targets = options.on;\n    }\n\n    delete options.on;\n  }\n\n  return (key, value, _oldValue, changes, content) => {\n    if (\n      targets &&\n      !targets.some((target) => {\n        const change = get(changes, target);\n        return change || (change === undefined && get(content, target));\n      })\n    ) {\n      return true;\n    }\n\n    let result = evValidatePresence(value, options, null, key);\n\n    if (typeof result === 'boolean' || typeof result === 'string') {\n      return result;\n    } else {\n      // We flipped the meaning behind `present` and `blank` so switch the two\n      if (result.type === 'present') {\n        result.type = 'blank';\n      } else if (result.type === 'blank') {\n        result.type = 'present';\n      }\n\n      return buildMessage(key, result);\n    }\n  };\n}\n"],"names":["validatePresence","options","targets","presence","on","undefined","Array","isArray","key","value","_oldValue","changes","content","some","target","change","get","result","evValidatePresence","type","buildMessage"],"mappings":";;;;AAIe,SAASA,gBAAgBA,CAACC,OAAO,EAAE;AAChD,EAAA,IAAIC,OAAO;AACX,EAAA,IAAI,OAAOD,OAAO,KAAK,SAAS,EAAE;AAChCA,IAAAA,OAAO,GAAG;AAAEE,MAAAA,QAAQ,EAAEF;KAAS;GAChC,MAAM,IAAIA,OAAO,IAAIA,OAAO,CAACG,EAAE,KAAKC,SAAS,EAAE;AAC9C,IAAA,IAAI,OAAOJ,OAAO,CAACG,EAAE,KAAK,QAAQ,EAAE;AAClCF,MAAAA,OAAO,GAAG,CAACD,OAAO,CAACG,EAAE,CAAC;KACvB,MAAM,IAAIE,KAAK,CAACC,OAAO,CAACN,OAAO,CAACG,EAAE,CAAC,EAAE;MACpCF,OAAO,GAAGD,OAAO,CAACG,EAAE;AACtB;IAEA,OAAOH,OAAO,CAACG,EAAE;AACnB;EAEA,OAAO,CAACI,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAEC,OAAO,EAAEC,OAAO,KAAK;IAClD,IACEV,OAAO,IACP,CAACA,OAAO,CAACW,IAAI,CAAEC,MAAM,IAAK;AACxB,MAAA,MAAMC,MAAM,GAAGC,GAAG,CAACL,OAAO,EAAEG,MAAM,CAAC;MACnC,OAAOC,MAAM,IAAKA,MAAM,KAAKV,SAAS,IAAIW,GAAG,CAACJ,OAAO,EAAEE,MAAM,CAAE;AACjE,KAAC,CAAC,EACF;AACA,MAAA,OAAO,IAAI;AACb;IAEA,IAAIG,MAAM,GAAGC,kBAAkB,CAACT,KAAK,EAAER,OAAO,EAAE,IAAI,EAAEO,GAAG,CAAC;IAE1D,IAAI,OAAOS,MAAM,KAAK,SAAS,IAAI,OAAOA,MAAM,KAAK,QAAQ,EAAE;AAC7D,MAAA,OAAOA,MAAM;AACf,KAAC,MAAM;AACL;AACA,MAAA,IAAIA,MAAM,CAACE,IAAI,KAAK,SAAS,EAAE;QAC7BF,MAAM,CAACE,IAAI,GAAG,OAAO;AACvB,OAAC,MAAM,IAAIF,MAAM,CAACE,IAAI,KAAK,OAAO,EAAE;QAClCF,MAAM,CAACE,IAAI,GAAG,SAAS;AACzB;AAEA,MAAA,OAAOC,YAAY,CAACZ,GAAG,EAAES,MAAM,CAAC;AAClC;GACD;AACH;;;;"}